<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LinkLancer - Connect with Creative Professionals</title>
  <link rel="stylesheet" href="../CSS/homepage.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Akshar:wght@400;700&family=Inter:wght@300;400;700;900&display=swap"
    rel="stylesheet">
  <style>
    /* Including the original styles */
    .create-input.has-image {
      border-left: 3px solid #4A8FE7;
      padding-left: 10px;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .post {
      position: relative;
    }

    .liked img {
      filter: brightness(0) saturate(100%) invert(35%) sepia(98%) saturate(1580%) hue-rotate(206deg) brightness(95%) contrast(95%);
    }

    .image-selected-indicator {
      background-color: rgba(74, 143, 231, 0.1);
      padding: 3px 8px;
      border-radius: 4px;
      display: inline-block;
      margin-left: 10px;
    }

    .action-button:hover {
      background-color: rgba(0, 0, 0, 0.05);
    }

    .media-section:hover {
      cursor: pointer;
      background-color: rgba(0, 0, 0, 0.05);
      border-radius: 5px;
      padding: 5px;
      transition: background-color 0.2s ease;
    }
    
    /* Adding fallback styles in case the CSS file doesn't load properly */
    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 0;
    }
    
    .homepage {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }
    
    .main-content {
      flex: 1;
      padding: 20px;
    }
    
    .content-grid {
      display: grid;
      grid-template-columns: 1fr 2fr 1fr;
      gap: 20px;
    }
    
    @media (max-width: 992px) {
      .content-grid {
        grid-template-columns: 1fr 2fr;
      }
      .sidebar-column {
        display: none;
      }
    }
    
    @media (max-width: 768px) {
      .content-grid {
        grid-template-columns: 1fr;
      }
      .profile-column {
        display: none;
      }
    }
    
    .nav-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 20px;
      background-color:  rgba(0, 0, 0, 0.16);
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .post {
      background-color: rgba(0, 0, 0, 0.16);
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      padding: 20px;
      margin-bottom: 20px;
    }
    
    .post-image {
      width: 100%;
      border-radius: 8px;
      margin: 15px 0;
    }
    
    .action-button {
      display: flex;
      align-items: center;
      gap: 5px;
      background: none;
      border: none;
      cursor: pointer;
      padding: 8px 12px;
      border-radius: 4px;
    }
    
    .error-message {
      color: #e74c3c;
      background-color: #fde2e2;
      padding: 10px;
      border-radius: 4px;
      margin: 10px 0;
      display: none;
    }
  </style>
</head>

<body>
  <main class="homepage">
    <header class="header">
      <nav class="nav-bar">
        <div class="nav-content">
            <div class="nav-group">
                <div class="logo-container">
                    <h1 class="logo-text">LinkLancer</h1>
                    <img src="../Assets/Images/homepage_org_img1.svg" alt="LinkLancer logo" class="logo-icon" onerror="this.onerror=null; this.src='https://via.placeholder.com/30x30?text=LL'; this.alt='LinkLancer logo placeholder';" />
                </div>
                <a href="../HTML/homepage.html" class="nav-link nav-link-active">Home</a>
            </div>
            <div class="nav-group">
                <img src="../Assets/Images/homepage_org_img2.svg" alt="Work icon" class="nav-icon" onerror="this.onerror=null; this.src='https://via.placeholder.com/24x24?text=W'; this.alt='Work icon placeholder';" />
                <a href="../HTML/workpage.html" class="nav-link">Work</a>
            </div>
            <div class="nav-group">
                <img src="../Assets/Images/homepage_org_img3.svg" alt="Chat icon" class="nav-icon-chat" onerror="this.onerror=null; this.src='https://via.placeholder.com/24x24?text=C'; this.alt='Chat icon placeholder';" />
                <a href="../HTML/messaging_interface.html" class="nav-link">Chat</a>
            </div>
        </div>
        <a href="../HTML/detailssection.html"><img src="../Assets/Images/john_doe.png" alt="User profile"
            class="nav-profile-img" onerror="this.onerror=null; this.src='https://via.placeholder.com/40x40?text=User'; this.alt='User profile placeholder';" /></a>
    </nav>
  </header>
    <div class="main-content">
      <div class="container content-grid">
        <!-- Profile Column -->
        <aside class="profile-column">
          <section class="profile-card">
            <div class="profile-info">
              <img src="../Assets/Images/john_doe.png" alt="Profile picture" class="profile-picture" onerror="this.onerror=null; this.src='https://via.placeholder.com/80x80?text=Profile'; this.alt='Profile picture placeholder';" />
              <div class="profile-details">
                <h2 class="profile-name">Rajit Agrawal</h2>
                <div class="profile-skills">
                  <span class="skill-tag">HTML/CSS</span>
                  <span class="skill-tag">UI/UX</span>
                  <span class="skill-tag">Video Editing</span>
                  <span class="skill-tag">Graphics Design</span>
                </div>
                <div class="profile-stats">
                  <div class="stat">
                    <span class="stat-number">14</span>
                    <span class="stat-label">Projects</span>
                  </div>
                  <div class="stat">
                    <span class="stat-number">243</span>
                    <span class="stat-label">Connections</span>
                  </div>
                </div>
              </div>
            </div>
          </section>
        </aside>

        <!-- Feed Column -->
        <main class="feed-column">
          <div id="error-container" class="error-message"></div>
          <section class="post-creation">
            <div class="create-post">
              <div class="new-post">
                <img src="../Assets/Images/97-512.webp" alt="Create post" class="create-icon" onerror="this.onerror=null; this.src='https://via.placeholder.com/24x24?text=+'; this.alt='Create post placeholder';" />
                <input type="text" class="create-input" placeholder="Share a new project..." />
              </div>
              <div class="post-actions">
                <div class="media-section">
                  <img src="../Assets/Images/attach.png" alt="Media icon" class="media-icon" onerror="this.onerror=null; this.src='https://via.placeholder.com/24x24?text=üìé'; this.alt='Media icon placeholder';" />
                  <span class="media-text">Media</span>
                </div>
                <div class="sort-section">
                  <span>Sort by</span>
                  <select class="sort-select">
                    <option>Trending</option>
                    <option>Recent</option>
                    <option>Most Liked</option>
                  </select>
                </div>
              </div>
            </div>

            <article class="post">
              <div class="post-header">
                <div class="post-author">
                  <img src="../Assets/Images/john_doe.png" alt="Author avatar" class="author-avatar" onerror="this.onerror=null; this.src='https://via.placeholder.com/40x40?text=User'; this.alt='Author avatar placeholder';" />
                  <div class="author-info">
                    <h3 class="author-name">Rajit Agrawal</h3>
                    <span class="post-time">2 hours ago</span>
                  </div>
                </div>
                <button class="more-options" aria-label="More options">
                  <img src="../Assets/Images/medium-priority.svg" alt="More options" class="more-options-icon" onerror="this.onerror=null; this.src='https://via.placeholder.com/24x24?text=‚ãÆ'; this.alt='More options placeholder';" />
                </button>
              </div>

              <h3 class="post-title">Bringing Cricket to Life Through Illustration!</h3>
              <p class="post-content">
                Cricket is more than just a sport‚Äîit's a passion that unites
                millions! üé®üèè I recently created this illustration in Adobe
                Illustrator, capturing the energy and excitement of people playing
                cricket. From the dynamic motion of the players to the vivid
                colors, every element is designed to bring the scene to life.

                This artwork reflects not just the game but also the spirit of
                teamwork, strategy, and determination. Would love to hear your
                thoughts‚Äîwhat's your favorite memory of playing or watching
                cricket? Let's celebrate the game together!
              </p>
              <img src="../Assets/Images/homepage_org_img9.png" alt="Cricket illustration" class="post-image" onerror="this.onerror=null; this.src='https://via.placeholder.com/600x400?text=Cricket+Illustration'; this.alt='Cricket illustration placeholder';" />

              <div class="post-engagement">
                <div class="engagement-actions">
                  <button class="action-button like-button">
                    <img src="../Assets/Images/facebook-like.png" alt="Like" class="like_icon" onerror="this.onerror=null; this.src='https://via.placeholder.com/20x20?text=üëç'; this.alt='Like placeholder';" />
                    <span>126</span>
                  </button>
                  <button class="action-button comment-button">
                    <img src="../Assets/Images/Chat comment conversation.svg" alt="Comment" class="comment-icon" onerror="this.onerror=null; this.src='https://via.placeholder.com/20x20?text=üí¨'; this.alt='Comment placeholder';" />
                    <span>24</span>
                  </button>
                  <button class="action-button share-button">
                    <img src="../Assets/Images/6826340.png" alt="Share" class="share-icon" onerror="this.onerror=null; this.src='https://via.placeholder.com/20x20?text=‚ÜóÔ∏è'; this.alt='Share placeholder';" />
                    <span>Share</span>
                  </button>
                </div>
              </div>
            </article>
          </section>
        </main>

        <!-- Sidebar Column -->
        <aside class="sidebar-column">
          <section class="trending-section">
            <div class="trending-header">
              <h2 class="trending-title">Trending now</h2>
              <img src="../Assets/Images/1946430.png" alt="Trending icon" class="trending-icon" onerror="this.onerror=null; this.src='https://via.placeholder.com/24x24?text=üî•'; this.alt='Trending icon placeholder';" />
            </div>

            <article class="trending-item">
              <h3 class="trending-item-title">Golu's portfolio website</h3>
              <p class="trending-item-desc">
                The most viewed portfolio website leading to higher conversions and client engagement...
              </p>
              <div class="trending-meta">
                <span class="views">3.2k views</span>
                <span class="trending-time">Trending for 2 days</span>
              </div>
            </article>

            <hr class="divider" />

            <article class="trending-item">
              <h3 class="trending-item-title">The wizard of UI/UX on YouTube</h3>
              <p class="trending-item-desc">
                A comprehensive guide to creating user-centered interfaces that convert...
              </p>
              <div class="trending-meta">
                <span class="views">2.8k views</span>
                <span class="trending-time">Trending for 1 day</span>
              </div>
            </article>

            <hr class="divider" />

            <article class="trending-item">
              <h3 class="trending-item-title">AI-driven graphic design approaches</h3>
              <p class="trending-item-desc">
                How AI tools are revolutionizing the creative workflow for designers...
              </p>
              <div class="trending-meta">
                <span class="views">1.9k views</span>
                <span class="trending-time">Trending for 3 days</span>
              </div>
            </article>
          </section>

          <section class="courses-section">
            <h2 class="courses-title">Courses for you</h2>
            <ul class="courses-list">
              <li class="course-item">
                <div class="course-info">
                  <h3 class="course-title">Portfolio Website Masterclass</h3>
                  <p class="course-instructor">By Golu Designs</p>
                </div>
                <span class="course-badge">New</span>
              </li>

              <li class="course-item">
                <div class="course-info">
                  <h3 class="course-title">UI/UX Design Fundamentals</h3>
                  <p class="course-instructor">The Design Wizard</p>
                </div>
                <span class="course-badge">Popular</span>
              </li>

              <li class="course-item">
                <div class="course-info">
                  <h3 class="course-title">Game Design Excellence</h3>
                  <p class="course-instructor">Award Winners Guild</p>
                </div>
              </li>

              <li class="course-item">
                <div class="course-info">
                  <h3 class="course-title">AI in Graphic Design</h3>
                  <p class="course-instructor">Future Creatives</p>
                </div>
                <span class="course-badge">Trending</span>
              </li>
            </ul>
          </section>
        </aside>
      </div>
    </div>

    <footer class="footer">
      <div class="container footer-content">
        <div class="footer-brand">
          <h2 class="footer-logo">LinkLancer</h2>
          <p class="footer-tagline">Connecting creative professionals worldwide</p>
        </div>
        <div class="footer-links">
          <div class="footer-link-group">
            <h3 class="footer-link-heading">About</h3>
            <ul>
              <li><a href="#">Our Story</a></li>
              <li><a href="#">Careers</a></li>
              <li><a href="#">Press</a></li>
            </ul>
          </div>
          <div class="footer-link-group">
            <h3 class="footer-link-heading">Support</h3>
            <ul>
              <li><a href="#">Help Center</a></li>
              <li><a href="#">Safety Center</a></li>
              <li><a href="#">Community Guidelines</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="copyright">
        <p>¬© 2025 LinkLancer. All rights reserved.</p>
      </div>
    </footer>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
        // Check if CSS is loaded
        const cssLoaded = Array.from(document.styleSheets).some(sheet => 
            sheet.href && sheet.href.includes('homepage.css'));
        
        if (!cssLoaded) {
            console.warn('CSS file may not be loaded: ../CSS/homepage.css - Using fallback styles');
        }
        
        const errorContainer = document.getElementById('error-container');
        const createInput = document.querySelector('.create-input');
        const mediaSection = document.querySelector('.media-section');
        const feedColumn = document.querySelector('.feed-column');
        const postCreationSection = document.querySelector('.post-creation');
        
        // Function to display errors to the user
        function showError(message) {
            errorContainer.textContent = message;
            errorContainer.style.display = 'block';
            setTimeout(() => {
                errorContainer.style.display = 'none';
            }, 5000);
        }
        
        // Function to check if image exists
        function imageExists(url, callback) {
            // Skip check for placeholder URLs
            if (url.includes('placeholder.com')) {
                callback(true);
                return;
            }
            
            const img = new Image();
            img.onload = function() { callback(true); };
            img.onerror = function() { callback(false); };
            img.src = url;
        }
        
        // Check critical images
        const criticalImages = [
            '../Assets/Images/facebook-like.png',
            '../Assets/Images/Chat comment conversation.svg',
            '../Assets/Images/6826340.png'
        ];
        
        criticalImages.forEach(img => {
            imageExists(img, function(exists) {
                if (!exists) {
                    console.warn(`Image may not exist: ${img} - Using fallback`);
                }
            });
        });
        
        let selectedImage = null;
        
        const fileInput = document.createElement('input');
        fileInput.type = 'file';
        fileInput.accept = 'image/*';
        fileInput.style.display = 'none';
        fileInput.addEventListener('change', handleImageSelect);
        document.body.appendChild(fileInput);
        
        mediaSection.addEventListener('click', function() {
            fileInput.click();
        });
        
        function handleImageSelect(event) {
            try {
                const file = event.target.files[0];
                if (file) {
                    // Validate file size (max 5MB)
                    if (file.size > 5 * 1024 * 1024) {
                        showError('File size too large. Please select an image under 5MB.');
                        return;
                    }
                    
                    // Validate file type
                    if (!file.type.match('image.*')) {
                        showError('Please select an image file.');
                        return;
                    }
                    
                    selectedImage = file;
                    createInput.value = createInput.value || 'Share thoughts about this image...';
                    createInput.classList.add('has-image');
                    
                    if (!document.querySelector('.image-selected-indicator')) {
                        const indicator = document.createElement('div');
                        indicator.className = 'image-selected-indicator';
                        indicator.textContent = 'üì∑ ' + file.name;
                        indicator.style.color = '#4A8FE7';
                        indicator.style.fontSize = '12px';
                        indicator.style.marginTop = '5px';
                        mediaSection.appendChild(indicator);
                    } else {
                        document.querySelector('.image-selected-indicator').textContent = 'üì∑ ' + file.name;
                    }
                }
            } catch (error) {
                console.error('Error selecting image:', error);
                showError('There was an error selecting your image. Please try again.');
            }
        }
        
        createInput.addEventListener('keydown', function(event) {
            if (event.key === 'Enter' && createInput.value.trim() !== '') {
                try {
                    createNewPost(createInput.value, selectedImage);
                    createInput.value = '';
                    selectedImage = null;
                    const indicator = document.querySelector('.image-selected-indicator');
                    if (indicator) {
                        indicator.remove();
                    }
                    createInput.classList.remove('has-image');
                } catch (error) {
                    console.error('Error creating post:', error);
                    showError('There was an error creating your post. Please try again.');
                }
            }
        });
        
        function createNewPost(content, imageFile) {
            const newPost = document.createElement('article');
            newPost.className = 'post';
            
            // Get user data safely
            const userNameElement = document.querySelector('.profile-name');
            const userAvatarElement = document.querySelector('.profile-picture');
            
            const userName = userNameElement ? userNameElement.textContent : 'User';
            const userAvatar = userAvatarElement ? userAvatarElement.src : 'https://via.placeholder.com/40x40?text=User';
            
            newPost.innerHTML = `
                <div class="post-header">
                    <div class="post-author">
                        <img src="${userAvatar}" alt="Author avatar" class="author-avatar" onerror="this.onerror=null; this.src='https://via.placeholder.com/40x40?text=User'; this.alt='Author avatar placeholder';" />
                        <div class="author-info">
                            <h3 class="author-name">${userName}</h3>
                            <span class="post-time">Just now</span>
                        </div>
                    </div>
                    <button class="more-options" aria-label="More options">
                        <img src="../Assets/Images/medium-priority.svg" alt="More options" class="more-options-icon" onerror="this.onerror=null; this.src='https://via.placeholder.com/24x24?text=‚ãÆ'; this.alt='More options placeholder';" />
                    </button>
                </div>
                <p class="post-content">${content}</p>
                <div class="post-engagement">
                    <div class="engagement-actions">
                        <button class="action-button like-button">
                            <img src="../Assets/Images/facebook-like.png" alt="Like" class="like_icon" onerror="this.onerror=null; this.src='https://via.placeholder.com/20x20?text=üëç'; this.alt='Like placeholder';" />
                            <span>0</span>
                        </button>
                        <button class="action-button comment-button">
                            <img src="../Assets/Images/Chat comment conversation.svg" alt="Comment" class="comment-icon" onerror="this.onerror=null; this.src='https://via.placeholder.com/20x20?text=üí¨'; this.alt='Comment placeholder';" />
                            <span>0</span>
                        </button>
                        <button class="action-button share-button">
                            <img src="../Assets/Images/6826340.png" alt="Share" class="share-icon" onerror="this.onerror=null; this.src='https://via.placeholder.com/20x20?text=‚ÜóÔ∏è'; this.alt='Share placeholder';" />
                            <span>Share</span>
                        </button>
                    </div>
                </div>
            `;
            
            if (imageFile) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const imgElement = document.createElement('img');
                        imgElement.src = e.target.result;
                        imgElement.alt = "Posted image";
                        imgElement.className = "post-image";
                        const engagementDiv = newPost.querySelector('.post-engagement');
                        newPost.insertBefore(imgElement, engagementDiv);
                    } catch (error) {
                        console.error('Error displaying image:', error);
                        showError('There was an error displaying your image.');
                    }
                };
                reader.onerror = function(error) {
                    console.error('Error reading file:', error);
                    showError('There was an error uploading your image. Please try again.');
                };
                reader.readAsDataURL(imageFile);
            }
            
            setTimeout(() => {
                try {
                    const likeButton = newPost.querySelector('.like-button');
                    likeButton.addEventListener('click', function() {
                        const likeCount = this.querySelector('span');
                        let currentLikes = parseInt(likeCount.textContent);
                        likeCount.textContent = currentLikes + 1;
                        likeButton.classList.add('liked');
                    });
                } catch (error) {
                    console.error('Error setting up like button:', error);
                }
            }, 0);
            
            // Insert the post at the beginning of the feed
            const firstExistingPost = document.querySelector('.post');
            if (firstExistingPost && firstExistingPost.parentNode) {
                firstExistingPost.parentNode.insertBefore(newPost, firstExistingPost);
            } else {
                // Fallback if we can't find the existing post
                postCreationSection.appendChild(newPost);
            }
            
            // Animation
            newPost.style.opacity = '0';
            newPost.style.transform = 'translateY(-20px)';
            newPost.style.transition = 'opacity 0.3s ease, transform 0.3s ease';
            
            setTimeout(() => {
                newPost.style.opacity = '1';
                newPost.style.transform = 'translateY(0)';
            }, 10);
        }
        
        // Set up existing like buttons
        document.querySelectorAll('.like-button').forEach(button => {
            button.addEventListener('click', function() {
                try {
                    const likeCount = this.querySelector('span');
                    let currentLikes = parseInt(likeCount.textContent);
                    likeCount.textContent = currentLikes + 1;
                    this.classList.add('liked');
                } catch (error) {
                    console.error('Error with like button:', error);
                }
            });
        });

        // Add post hint when input is focused
        createInput.addEventListener('focus', function() {
            if (!document.querySelector('.post-hint')) {
                const hint = document.createElement('div');
                hint.className = 'post-hint';
                hint.textContent = 'Press Enter to post';
                hint.style.color = '#888';
                hint.style.fontSize = '12px';
                hint.style.marginTop = '5px';
                hint.style.textAlign = 'right';
                
                const newPostContainer = document.querySelector('.new-post');
                if (newPostContainer) {
                    newPostContainer.appendChild(hint);
                }
                
                createInput.addEventListener('blur', function() {
                    const postHint = document.querySelector('.post-hint');
                    if (postHint) {
                        postHint.remove();
                    }
                });
            }
        });
        
        console.log("LinkLancer script initialized successfully!");
    });
  </script>
</body>

</html>